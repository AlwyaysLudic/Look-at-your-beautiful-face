<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Your Head</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 50px 12px;
      background-color: #f7f7f7;
    }
    h1 { color: #333; margin-bottom: 8px; }
    p { color: #555; margin-top: 0; }
    .controls { margin-top: 16px; }
    input {
      padding: 10px;
      font-size: 1rem;
      border: 2px solid #ccc;
      border-radius: 6px;
      width: 260px;
      max-width: 80vw;
    }
    button {
      padding: 10px 16px;
      font-size: 1rem;
      border: none;
      background-color: #007bff;
      color: #fff;
      border-radius: 6px;
      cursor: pointer;
      margin-left: 8px;
    }
    button:hover { background-color: #005ec2; }
    #result { margin-top: 28px; }
    #result img {
      max-width: 240px;
      border-radius: 12px;
      border: 3px solid #333;
      background: #fff;
    }
    .hint { font-size: .9rem; color: #777; margin-top: 10px; }
  </style>
</head>
<body>

  <h1>Your Head</h1>
  <p>Enter your first name, last name or nickname:</p>

  <div class="controls">
    <input type="text" id="name" placeholder="Your name here" />
    <button id="see">See my face</button>
  </div>

  <div id="result" aria-live="polite"></div>
  <div class="hint">Tip: The first letter decides the face. Try different letters!</div>

  <script>
    // Choisit la premi√®re lettre alphab√©tique du nom, en ignorant les espaces et accents
    function firstAlphaLetter(input) {
      const cleaned = input
        .normalize('NFD')                // s√©pare lettres + accents
        .replace(/[\u0300-\u036f]/g, '') // retire accents
        .trim();
      const match = cleaned.match(/[a-z]/i);
      return match ? match[0].toLowerCase() : null;
    }

    // Construit une URL d'image selon la lettre (A‚ÜíZ). RoboHash g√©n√®re une image automatiquement.
    function urlForLetter(letter) {
      // .png + size pour une image nette ; `set=set2` pour varier le style
      return `https://robohash.org/${encodeURIComponent(letter)}.png?size=240x240&set=set2`;
    }

    function showHead() {
      const name = document.getElementById('name').value;
      const result = document.getElementById('result');

      if (!name || !name.trim()) {
        result.innerHTML = `<p style="color:#d00">Please enter a name first.</p>`;
        return;
      }

      const letter = firstAlphaLetter(name);
      if (!letter) {
        result.innerHTML = `<p style="color:#d00">Please include at least one letter (A‚ÄìZ).</p>`;
        return;
      }

      const imgUrl = urlForLetter(letter);

      // Affiche le r√©sultat
      result.innerHTML = `
        <p>Here is your head, <strong>${escapeHtml(name)}</strong> üòè (letter: ${letter.toUpperCase()})</p>
        <img src="${imgUrl}" alt="Generated head for letter ${letter.toUpperCase()}" />
      `;
    }

    // Petite fonction pour √©viter d'injecter du HTML quand on affiche le nom
    function escapeHtml(str) {
      return str.replace(/[&<>"']/g, s => ({
        '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;'
      }[s]));
    }

    // Bouton + touche Entr√©e
    document.getElementById('see').addEventListener('click', showHead);
    document.getElementById('name').addEventListener('keydown', (e) => {
      if (e.key === 'Enter') showHead();
    });
  </script>

</body>
</html>
